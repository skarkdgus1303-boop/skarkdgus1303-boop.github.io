<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ìš°ì£¼ ê²Œì„ ì„¼í„°</title>
<style>
body{
  margin:0;
  background:black;
  color:white;
  text-align:center;
  font-family:Arial;
  overflow:hidden;
  height:100vh;
}

button{
  padding:10px 20px;
  margin:10px;
  border:2px solid cyan;
  background:transparent;
  color:cyan;
  cursor:pointer;
  font-size:18px;
}

button:hover{
  background:cyan;
  color:black;
}

#gameArea{
  position:relative;
  width:100%;
  height:80%;
  overflow:hidden;
  margin-top:20px;
  border:1px solid cyan;
  background:black;
}

#scoreDisplay {
  font-size: 20px;
  margin-top: 10px;
  color: yellow;
}

.player{
  width:40px;
  height:40px;
  background:cyan;
  position:absolute;
}

.enemy{
  width:30px;
  height:30px;
  background:red;
  position:absolute;
}

.bullet{
  width:5px;
  height:15px;
  background:white;
  position:absolute;
}

.target{
  width:30px;
  height:30px;
  background:yellow;
  position:absolute;
  cursor:pointer;
}

/* ê²Œì„ì˜¤ë²„ ë ˆì´ì–´ */
#gameOverMsg {
  display:none;
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  background:red;
  color:white;
  padding:20px 40px;
  font-size:30px;
  border:3px solid yellow;
  z-index:1000;
  text-align:center;
  cursor:pointer;
}
</style>
</head>

<body>

<h1>ğŸ® ìš°ì£¼ ê²Œì„ ì„¼í„° ğŸ®</h1>

<div id="menu">
  <button onclick="startShooting()">ğŸ›¸ ìŠˆíŒ… ê²Œì„</button>
  <button onclick="startDodge()">ğŸ§± í”¼í•˜ê¸° ê²Œì„</button>
  <button onclick="startClick()">ğŸ¯ í´ë¦­ ê²Œì„</button>
  <button onclick="startFastTap()">âš¡ ë¹ ë¥´ê²Œ ëˆ„ë¥´ê¸°</button>
  <button onclick="startSpeedDodge()">ğŸ’¨ ì†ë„ í”¼í•˜ê¸°</button>
  <a href="index.html"><button>ğŸ  í™ˆìœ¼ë¡œ</button></a>
</div>

<div id="scoreDisplay">ì ìˆ˜: 0</div>
<div id="gameArea"></div>

<div id="gameOverMsg">ğŸ’¥ ê²Œì„ì˜¤ë²„!<br>í´ë¦­í•˜ë©´ ê³„ì†</div>

<script>
let gameArea = document.getElementById("gameArea");
let score = 0;
let enemyInterval;
let moveInterval;
let bullets = [];
let scoreDisplay = document.getElementById("scoreDisplay");

/* ë°©í–¥í‚¤ ë³€ìˆ˜ */
let keysPressed = {};
let playerSpeed = 10;

/* ê²Œì„ ì´ˆê¸°í™” */
function clearGame(){
  gameArea.innerHTML="";
  score=0;
  bullets=[];
  scoreDisplay.innerText="ì ìˆ˜: 0";
  document.title="ìš°ì£¼ ê²Œì„ ì„¼í„°";
  if(enemyInterval) clearInterval(enemyInterval);
  if(moveInterval) clearInterval(moveInterval);
  document.onmousemove=null;
  document.onclick=null;
  document.onkeydown=null;
  document.onkeyup=null;
  document.getElementById("gameOverMsg").style.display="none";
}

/* ê²Œì„ì˜¤ë²„ ë ˆì´ì–´ í‘œì‹œ */
function showGameOver(){
  let msg=document.getElementById("gameOverMsg");
  msg.style.display="block";
  msg.onclick=()=>{ msg.style.display="none"; };
}

/* ================== í”Œë ˆì´ì–´ ì´ë™ í•¨ìˆ˜ ================== */
function enableKeyboard(player){
  keysPressed = {};
  document.onkeydown = function(e){
    keysPressed[e.key] = true;
  }
  document.onkeyup = function(e){
    keysPressed[e.key] = false;
  }

  function movePlayer(){
    if(!player) return;
    let left = player.offsetLeft;
    let top = player.offsetTop;

    if(keysPressed["ArrowLeft"]) left -= playerSpeed;
    if(keysPressed["ArrowRight"]) left += playerSpeed;
    if(keysPressed["ArrowUp"]) top -= playerSpeed;
    if(keysPressed["ArrowDown"]) top += playerSpeed;

    // ê²½ê³„ê°’
    if(left < 0) left = 0;
    if(left > gameArea.offsetWidth - 40) left = gameArea.offsetWidth - 40;
    if(top < 0) top = 0;
    if(top > gameArea.offsetHeight - 40) top = gameArea.offsetHeight - 40;

    player.style.left = left + "px";
    player.style.top = top + "px";

    requestAnimationFrame(movePlayer);
  }
  movePlayer();
}

/* ================== ìŠˆíŒ… ê²Œì„ ================== */
function startShooting(){
  clearGame();
  let player=document.createElement("div");
  player.className="player";
  gameArea.appendChild(player);
  player.style.left=(gameArea.offsetWidth/2 - 20)+"px";
  player.style.top=(gameArea.offsetHeight - 50)+"px";

  // ë§ˆìš°ìŠ¤ ì´ë™
  document.onmousemove = e=>{
    let rect = gameArea.getBoundingClientRect();
    let x = e.clientX - rect.left - 20;
    if(x < 0) x=0;
    if(x > gameArea.offsetWidth - 40) x=gameArea.offsetWidth - 40;
    player.style.left = x + "px";
  }

  // ë°©í–¥í‚¤ ì´ë™
  enableKeyboard(player);

  // í´ë¦­ ì´ì•Œ ë°œì‚¬
  document.onclick = ()=>{
    let bullet=document.createElement("div");
    bullet.className="bullet";
    bullet.style.left=(player.offsetLeft + 18)+"px";
    bullet.style.top=(player.offsetTop - 15)+"px";
    gameArea.appendChild(bullet);
    bullets.push(bullet);
  }

  // ì  ìƒì„±
  enemyInterval=setInterval(()=>{
    let enemy=document.createElement("div");
    enemy.className="enemy";
    enemy.style.left=Math.random()*(gameArea.offsetWidth-30)+"px";
    enemy.style.top="0px";
    gameArea.appendChild(enemy);
  },1000);

  // ì  ì´ë™ + ì´ì•Œ ì´ë™
  moveInterval=setInterval(()=>{
    let enemies=document.querySelectorAll(".enemy");
    enemies.forEach(enemy=>{
      enemy.style.top=(enemy.offsetTop+5)+"px";
      if(enemy.offsetTop>gameArea.offsetHeight) enemy.remove();
      bullets.forEach((bullet,i)=>{
        if(bullet.offsetTop<enemy.offsetTop+30 &&
           bullet.offsetTop+15>enemy.offsetTop &&
           bullet.offsetLeft<enemy.offsetLeft+30 &&
           bullet.offsetLeft+5>enemy.offsetLeft){
          enemy.remove();
          bullet.remove();
          bullets.splice(i,1);
          score++;
          scoreDisplay.innerText="ì ìˆ˜: "+score;
          document.title="ì ìˆ˜: "+score;
        }
      });
    });

    bullets.forEach((bullet,i)=>{
      bullet.style.top=(bullet.offsetTop-10)+"px";
      if(bullet.offsetTop<0){
        bullet.remove();
        bullets.splice(i,1);
      }
    });
  },30);
}

/* ================== í”¼í•˜ê¸° ê²Œì„ ================== */
function startDodge(){
  clearGame();
  let player=document.createElement("div");
  player.className="player";
  gameArea.appendChild(player);
  player.style.left=(gameArea.offsetWidth/2 - 20)+"px";
  player.style.top=(gameArea.offsetHeight - 50)+"px";

  document.onmousemove = e=>{
    let rect=gameArea.getBoundingClientRect();
    let x=e.clientX - rect.left - 20;
    if(x<0)x=0;
    if(x>gameArea.offsetWidth-40)x=gameArea.offsetWidth-40;
    player.style.left=x+"px";
  }

  enableKeyboard(player);

  enemyInterval=setInterval(()=>{
    let enemy=document.createElement("div");
    enemy.className="enemy";
    enemy.style.left=Math.random()*(gameArea.offsetWidth-30)+"px";
    enemy.style.top="0px";
    gameArea.appendChild(enemy);

    let fall=setInterval(()=>{
      enemy.style.top=(enemy.offsetTop+7)+"px";

      if(enemy.offsetTop+30>player.offsetTop &&
         enemy.offsetLeft<player.offsetLeft+40 &&
         enemy.offsetLeft+30>player.offsetLeft){
        showGameOver();
        clearInterval(fall);
      }

      if(enemy.offsetTop>gameArea.offsetHeight){
        enemy.remove();
        clearInterval(fall);
      }
    },30);
  },800);
}

/* ================== í´ë¦­ ê²Œì„ ================== */
function startClick(){
  clearGame();
  let scoreClick=0;
  scoreDisplay.innerText="ì ìˆ˜: 0";

  enemyInterval=setInterval(()=>{
    let target=document.createElement("div");
    target.className="target";
    target.style.left=Math.random()*(gameArea.offsetWidth-30)+"px";
    target.style.top=Math.random()*(gameArea.offsetHeight-30)+"px";

    target.onclick=()=>{
      scoreClick++;
      scoreDisplay.innerText="ì ìˆ˜: "+scoreClick;
    }

    gameArea.appendChild(target);
    setTimeout(()=>target.remove(),1500);
  },1000);
}

/* ================== ë¹ ë¥´ê²Œ ëˆ„ë¥´ê¸° ê²Œì„ ================== */
function startFastTap(){
  clearGame();
  let scoreTap=0;
  scoreDisplay.innerText="ì ìˆ˜: 0";

  enemyInterval=setInterval(()=>{
    let target=document.createElement("div");
    target.className="target";
    target.style.left=Math.random()*(gameArea.offsetWidth-30)+"px";
    target.style.top=Math.random()*(gameArea.offsetHeight-30)+"px";

    target.onclick=()=>{
      scoreTap++;
      scoreDisplay.innerText="ì ìˆ˜: "+scoreTap;
    }

    gameArea.appendChild(target);
    setTimeout(()=>target.remove(),1000);
  },700);
}

/* ================== ì†ë„ í”¼í•˜ê¸° ê²Œì„ ================== */
function startSpeedDodge(){
  clearGame();
  let player=document.createElement("div");
  player.className="player";
  gameArea.appendChild(player);
  player.style.left=(gameArea.offsetWidth/2 - 20)+"px";
  player.style.top=(gameArea.offsetHeight - 50)+"px";

  document.onmousemove = e=>{
    let rect=gameArea.getBoundingClientRect();
    let x=e.clientX - rect.left - 20;
    if(x<0)x=0;
    if(x>gameArea.offsetWidth-40)x=gameArea.offsetWidth-40;
    player.style.left=x+"px";
  }

  enableKeyboard(player);

  let speed=5;
  enemyInterval=setInterval(()=>{
    let enemy=document.createElement("div");
    enemy.className="enemy";
    enemy.style.left=Math.random()*(gameArea.offsetWidth-30)+"px";
    enemy.style.top="0px";
    gameArea.appendChild(enemy);

    let fall=setInterval(()=>{
      enemy.style.top=(enemy.offsetTop+speed)+"px";

      if(enemy.offsetTop+30>player.offsetTop &&
         enemy.offsetLeft<player.offsetLeft+40 &&
         enemy.offsetLeft+30>player.offsetLeft){
        showGameOver();
        clearInterval(fall);
      }

      if(enemy.offsetTop>gameArea.offsetHeight){
        enemy.remove();
        clearInterval(fall);
        speed += 0.5;
      }
    },30);
  },800);
}
</script>
</body>
</html>
