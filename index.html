<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ULTRA CYBER UNIVERSE</title>
<style>
body {
  margin: 0;
  overflow: hidden;
  background: black;
  cursor: none;
  font-family: Arial, sans-serif;
}

#ui {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  display: flex;
  gap: 15px;
}

button {
  padding: 10px 20px;
  background: rgba(0,255,255,0.1);
  border: 1px solid cyan;
  color: white;
  font-weight: bold;
  border-radius: 10px;
  backdrop-filter: blur(10px);
  cursor: pointer;
  transition: 0.3s;
}
button:hover {
  background: cyan;
  color: black;
  box-shadow: 0 0 20px cyan;
}

#cursor {
  position: fixed;
  width: 25px;
  height: 25px;
  border-radius: 50%;
  background: rgba(0,255,255,0.5);
  box-shadow: 0 0 30px cyan;
  pointer-events: none;
  transform: translate(-50%, -50%);
  z-index: 1000;
}
</style>
</head>
<body>

<div id="ui">
  <button id="warp">üå† WARP</button>
  <button id="blackhole">üï≥ BLACKHOLE</button>
  <button id="sound">üîä SOUND</button>
</div>

<div id="cursor"></div>

<audio id="bgm" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" loop></audio>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 2000);
let renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

camera.position.z = 200;

// ===== Î≥Ñ ÏÉùÏÑ± (10000Í∞ú) =====
let starsGeometry = new THREE.BufferGeometry();
let starVertices = [];

for(let i=0;i<10000;i++){
  let x = (Math.random()-0.5)*2000;
  let y = (Math.random()-0.5)*2000;
  let z = (Math.random()-0.5)*2000;
  starVertices.push(x,y,z);
}

starsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices,3));
let starsMaterial = new THREE.PointsMaterial({color:0xffffff});
let starField = new THREE.Points(starsGeometry,starsMaterial);
scene.add(starField);

// ===== ÌñâÏÑ± =====
let planets = [];
for(let i=0;i<5;i++){
  let geometry = new THREE.SphereGeometry(20+Math.random()*20,32,32);
  let material = new THREE.MeshStandardMaterial({
    color: new THREE.Color(`hsl(${Math.random()*360},100%,50%)`),
    emissive: 0x111111
  });
  let planet = new THREE.Mesh(geometry,material);
  planet.position.x = 200 + i*150;
  scene.add(planet);
  planets.push(planet);
}

let light = new THREE.PointLight(0xffffff,2,1000);
light.position.set(0,0,0);
scene.add(light);

// ===== ÎßàÏö∞Ïä§ Ïπ¥Î©îÎùº Ï†úÏñ¥ =====
document.addEventListener('mousemove',(e)=>{
  let x = (e.clientX/window.innerWidth - 0.5)*2;
  let y = (e.clientY/window.innerHeight - 0.5)*2;
  camera.rotation.y = x*0.5;
  camera.rotation.x = y*0.5;

  document.getElementById('cursor').style.left = e.clientX+"px";
  document.getElementById('cursor').style.top = e.clientY+"px";
});

// ===== Ïï†ÎãàÎ©îÏù¥ÏÖò =====
function animate(){
  requestAnimationFrame(animate);
  starField.rotation.y += 0.0005;

  planets.forEach((p,i)=>{
    p.rotation.y += 0.01;
    p.position.x = Math.cos(Date.now()*0.0002+i)*300;
    p.position.z = Math.sin(Date.now()*0.0002+i)*300;
  });

  renderer.render(scene,camera);
}
animate();

// ===== ÏõåÌîÑ Î™®Îìú =====
document.getElementById('warp').onclick = ()=>{
  camera.position.z = 50;
  let interval = setInterval(()=>{
    starField.rotation.y += 0.05;
  },10);
  setTimeout(()=>{
    clearInterval(interval);
    camera.position.z = 200;
  },2000);
};

// ===== Î∏îÎûôÌôÄ =====
document.getElementById('blackhole').onclick = ()=>{
  planets.forEach(p=>{
    p.position.multiplyScalar(0.5);
  });
};

// ===== ÏÇ¨Ïö¥Îìú + ÏùåÏïÖ Î∞òÏùë =====
let bgm = document.getElementById('bgm');
let audioContext = new (window.AudioContext || window.webkitAudioContext)();
let analyser = audioContext.createAnalyser();
let source = audioContext.createMediaElementSource(bgm);
source.connect(analyser);
analyser.connect(audioContext.destination);
analyser.fftSize = 256;
let dataArray = new Uint8Array(analyser.frequencyBinCount);

document.getElementById('sound').onclick = ()=>{
  if(bgm.paused){
    bgm.play();
    audioContext.resume();
  } else {
    bgm.pause();
  }
};

function audioReactive(){
  analyser.getByteFrequencyData(dataArray);
  let avg = dataArray.reduce((a,b)=>a+b)/dataArray.length;
  starField.scale.setScalar(1+avg/300);
  requestAnimationFrame(audioReactive);
}
audioReactive();

window.addEventListener('resize',()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth,window.innerHeight);
});
</script>

</body>
</html>
